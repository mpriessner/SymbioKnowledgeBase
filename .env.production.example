# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# SymbioKnowledgeBase — Production Environment Variables
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# Copy this file to .env and set all values before deploying.
#
# REQUIRED variables are marked with [REQUIRED].
# OPTIONAL variables have defaults shown in comments.
#
# Security checklist:
#   [ ] DB_PASSWORD is a strong random password (>= 32 characters)
#   [ ] NEXTAUTH_SECRET is generated with: openssl rand -base64 32
#   [ ] NEXTAUTH_URL matches your production domain
#   [ ] .env file is NOT committed to version control
#   [ ] .env file permissions are restricted: chmod 600 .env
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ── Database ───────────────────────────────────────────────

# [REQUIRED] PostgreSQL password for the 'symbio' user.
# Generate with: openssl rand -base64 32
# Used by both the app (in DATABASE_URL) and the db container.
DB_PASSWORD=""

# [AUTO] Database connection URL — constructed from DB_PASSWORD.
# The docker-compose.prod.yml builds this automatically.
# Only set this manually if using an external database.
# DATABASE_URL="postgresql://symbio:${DB_PASSWORD}@db:5432/symbio?schema=public&connection_limit=20"

# ── Authentication ─────────────────────────────────────────

# [REQUIRED] NextAuth.js secret for JWT signing and encryption.
# Generate with: openssl rand -base64 32
# NEVER reuse the development default value in production.
NEXTAUTH_SECRET=""

# [REQUIRED] The canonical URL where users access the application.
# Must include the protocol (https://) and NOT include a trailing slash.
# Examples:
#   https://kb.example.com
#   https://symbio.yourdomain.com
NEXTAUTH_URL="https://your-domain.com"

# ── Application ────────────────────────────────────────────

# [OPTIONAL] Port for the Next.js server inside the container.
# The docker-compose maps this to the host port.
# Default: 3000
APP_PORT=3000

# [OPTIONAL] Node.js environment. Always "production" for deployments.
# Default: production
NODE_ENV=production

# ── Logging ────────────────────────────────────────────────

# [OPTIONAL] Log level for the application.
# Values: error, warn, info, debug
# Default: info
LOG_LEVEL=info

# ── Backups ────────────────────────────────────────────────

# [OPTIONAL] Directory for database backups.
# The backup script writes pg_dump files to this directory.
# Default: ./backups
BACKUP_DIR=./backups

# [OPTIONAL] Number of backup files to retain.
# Older backups are deleted when the limit is exceeded.
# Default: 7 (one week of daily backups)
BACKUP_RETENTION_COUNT=7
