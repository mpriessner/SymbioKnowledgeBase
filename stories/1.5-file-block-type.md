# Story 1.5: Create FILE Block Type in Editor

## Metadata
- **Epic:** Epic 1 â€” File Upload & Storage System
- **Points:** 5
- **Priority:** Medium
- **Status:** ðŸ”² Not Started

## Description
Add a new FILE block type to the TipTap editor that displays uploaded files inline with page content.

## User Story
*As a user, I want to embed uploaded files as blocks in my page so that files appear inline with my content.*

## Acceptance Criteria
- [ ] New BlockType.FILE added to schema
- [ ] FILE block renders file preview/icon based on type
- [ ] PDF files show thumbnail preview
- [ ] Images show thumbnail preview
- [ ] Other files show icon + filename + size
- [ ] Click opens file in new tab or downloads
- [ ] Block can be repositioned via drag-and-drop
- [ ] Block can be deleted (file optionally deleted)
- [ ] Slash command `/file` opens upload dialog

## Technical Details

### Block Content Schema
```typescript
interface FileBlockContent {
  fileId: string;
  displayMode: 'inline' | 'card' | 'link';
  caption?: string;
}
```

### TipTap Extension
```typescript
// src/components/editor/extensions/fileBlock.ts
import { Node } from '@tiptap/core';
import { ReactNodeViewRenderer } from '@tiptap/react';
import { FileBlockView } from '../nodeViews/FileBlockView';

export const FileBlock = Node.create({
  name: 'fileBlock',
  group: 'block',
  atom: true,
  draggable: true,
  
  addAttributes() {
    return {
      fileId: { default: null },
      displayMode: { default: 'card' },
      caption: { default: '' },
    };
  },
  
  addNodeView() {
    return ReactNodeViewRenderer(FileBlockView);
  },
});
```

### Display Modes
1. **Card**: Large preview with filename, size, download button
2. **Inline**: Compact file chip with icon
3. **Link**: Text link only

## Dependencies
- Depends on: 1.3, 1.4
- Blocks: None

## Files to Create/Modify
- `src/components/editor/extensions/fileBlock.ts`
- `src/components/editor/nodeViews/FileBlockView.tsx`
- `src/lib/editor/editorConfig.ts` (register extension)
- `prisma/schema.prisma` (add FILE to BlockType enum)

## Testing
- Unit: Extension configuration
- Component: FileBlockView rendering
- Integration: Insert via slash command

## Complexity
**M (Medium)** â€” TipTap extension development
