# Story 1.1: Create FileAttachment Database Model

## Metadata
- **Epic:** Epic 1 â€” File Upload & Storage System
- **Points:** 3
- **Priority:** High
- **Status:** ðŸ”² Not Started

## Description
Create a Prisma database model for file attachments so that file metadata can be stored and queried efficiently.

## User Story
*As a developer, I want a database model for file attachments so that I can store and query file metadata efficiently.*

## Acceptance Criteria
- [ ] FileAttachment model created in Prisma schema
- [ ] Includes: id, tenantId, pageId, blockId (optional), filename, mimeType, size, storagePath, status, createdAt, updatedAt
- [ ] Status enum: UPLOADING, PROCESSING, READY, FAILED
- [ ] Proper indexes on tenantId, pageId, status
- [ ] Foreign key relations to Page and Block
- [ ] Migration runs without errors

## Technical Details

### Prisma Schema
```prisma
model FileAttachment {
  id          String           @id @default(uuid())
  tenantId    String           @map("tenant_id")
  pageId      String?          @map("page_id")
  blockId     String?          @map("block_id")
  filename    String
  mimeType    String           @map("mime_type")
  size        Int              // bytes
  storagePath String           @map("storage_path")
  status      FileStatus       @default(UPLOADING)
  metadata    Json?            // additional file metadata
  createdAt   DateTime         @default(now()) @map("created_at")
  updatedAt   DateTime         @updatedAt @map("updated_at")
  
  tenant      Tenant           @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  page        Page?            @relation(fields: [pageId], references: [id], onDelete: SetNull)
  
  @@index([tenantId, pageId])
  @@index([tenantId, status])
  @@map("file_attachments")
}

enum FileStatus {
  UPLOADING
  PROCESSING
  READY
  FAILED
}
```

## Dependencies
- Depends on: None
- Blocks: 1.2, 1.3, 1.5, 1.6

## Files to Create/Modify
- `prisma/schema.prisma`
- `prisma/migrations/YYYYMMDD_file_attachments/`

## Testing
- Unit tests: Verify model creates correctly
- Integration tests: CRUD operations on FileAttachment

## Complexity
**S (Small)** â€” Straightforward schema addition
