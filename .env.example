# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# SymbioKnowledgeBase — Environment Variables
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Copy this file to .env and fill in the values.
# Never commit .env to version control.
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ── Database ──────────────────────────────────────────────
# PostgreSQL connection string.
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
# For Docker Compose: use "db" as HOST (Docker service name).
# For local development: use "localhost" as HOST.
DATABASE_URL="postgresql://symbio:symbio_dev_password@localhost:5432/symbio?schema=public"

# Database password (used by Docker Compose for PostgreSQL container).
# IMPORTANT: Change this in production!
DB_PASSWORD="symbio_dev_password"

# ── Supabase ──────────────────────────────────────────────
# Supabase project URL and keys.
# Get these from: Supabase Dashboard → Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://xxxxx.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# ── Google OAuth ──────────────────────────────────────────
# Google OAuth is configured in the Supabase dashboard (Authentication → Providers → Google).
# The client ID and secret come from Google Cloud Console (APIs & Services → Credentials).
# No additional env vars needed here — Supabase handles the OAuth flow server-side.

# ── Cross-App SSO ─────────────────────────────────────────
# Cookie domain for cross-subdomain SSO across Symbio apps.
# Set to ".symbio.com" in production so cookies are shared across
# exptube.symbio.com, knowledge.symbio.com, eln.symbio.com, etc.
# Leave empty for single-app / localhost development.
# NEXT_PUBLIC_COOKIE_DOMAIN=".symbio.com"

# ── Application ───────────────────────────────────────────
# Node environment: "development" or "production"
NODE_ENV="development"

# ── Summary Generation (LLM) ─────────────────────────────
# API key for LLM-powered page summary generation.
# Leave empty to disable automatic summary generation.
# SUMMARY_LLM_API_KEY=""
# Provider: "openai" (default) or "anthropic"
# SUMMARY_LLM_PROVIDER="openai"
# Model: "gpt-4o-mini" (default) or e.g. "claude-3-haiku-20240307"
# SUMMARY_LLM_MODEL="gpt-4o-mini"
# Change threshold: minimum content change ratio to trigger regeneration (default 0.10 = 10%)
# SUMMARY_CHANGE_THRESHOLD="0.10"
# Rate limit: max LLM calls per minute per tenant (default 10)
# SUMMARY_RATE_LIMIT="10"

# ── Agent Sweep Mode ──────────────────────────────────────
# Maximum pages per sweep run (default 500). Prevents runaway processing.
# MAX_SWEEP_BUDGET="500"
# LLM calls per minute during sweep (default 10)
# SWEEP_RATE_LIMIT="10"
